# Jest Introduction

#### What is Jest ?

- JavaScript/TypeScript testing framework

- Developed by facebook

- Test runner

- Set of global functions : describe,test,expect(From the moment we install jest as a dependency inside our project we will have acess to these global functions)

- Assertion library

- Powerful set of matchers

#### Advantages of Jest

- Most popular test framework , most supported 

- All in one solution  (test runner,asserting library,matchers)

- TypeScript support

#### Jest Project Setup

First we initialize a node project with `npm init -y`

Then we add our dependencies `npm i -D typescript jest ts-jest @types/jest ts-node`

Then we create a jest.config.ts file, The folder structure will look like this 

![](../assets/folder-structures-jest.png)

jest.config.ts file 

```ts

// Import the Config type from Jest's TypeScript definitions

import type { Config } from "@jest/types";

const config: Config.InitialOptions = {

Â  // Use "ts-jest" preset, which allows Jest to run TypeScript tests

Â  preset: "ts-jest",

Â  // Set the test environment to "node", meaning tests will run in a Node.js environment

Â  testEnvironment: "node",

Â  // Enable verbose mode, so Jest provides detailed test output in the console

Â  verbose: true,

};

export default config;

```

Then we create a folder called src , our actual code will be in the app folder , our tests will be in the test folder .We are testing utils.ts file 

```ts
utils.ts in app folder 
export function toUpperCase(arg: string) {

Â  return arg.toUpperCase();

}

```

In our test folder we will have a `Utils.test.ts` file ,it can also be called `Utils.spec.ts` file(Jest undertstands this is a test file whenever it sees `.test` or `.spec` ) , Utils.test.ts file is shown below  

```ts
import { toUpperCase } from "../app/Utils";


// `describe` groups multiple related tests into a single test suite
describe("Utils test suite", () => {

 // `test` defines an individual test case
  test("should return uppercase", () => {

    const result = toUpperCase("abc");

Â Â Â Â // Use Jest's `expect` function to assert the expected output
    expect(result).toBe("ABC");

  });

});

```

We need to configure our npm for jest like this 

```ts
"scripts": {

Â  Â  "test": "jest"

Â  },

```

now we can run our tests like `npm test`Â Â Â , we also need to configure our `tsconfig.json` file

![](../assets/ts-config.png)

# Structure of an Unit test

Structure of a properly written unit test(Universal convention) is the AAA principles

- Arrange(Put everything we need in orde to test)

- Act 

- Asserrt 

- Setup

- Teardown

(Setup and Teardown are used for more complex tests)

Utils.test.ts

```ts
import { toUpperCase } from "../app/Utils";

describe("Utils test suite", () => {

Â  it("should return uppercase of a valid string", () => {

Â  Â  //arrange, sut=>system under test

Â  Â  const sut = toUpperCase;

Â  Â  const expected = "ABC";

Â  Â  //act

Â  Â  const actual = sut("abc");

Â  Â  //assert:

Â  Â  expect(actual).toBe("ABC");

Â  });

});



```

# Jest assertions and matchers

Utils.ts

```ts
export function toUpperCase(arg: string) {

Â  return arg.toUpperCase();

}

// Type definition for `stringInfo` object

export type stringInfo = {

Â  lowerCase: string;

Â  upperCase: string;

Â  characters: string[];

Â  length: number;

Â  extraInfo: Object | undefined;

};

// Function that returns detailed information about a string

export function getStringInfo(arg: string): stringInfo {

Â  return {

Â  Â  lowerCase: arg.toLowerCase(),

Â  Â  upperCase: arg.toUpperCase(),

Â  Â  characters: Array.from(arg),

Â  Â  length: arg.length,

Â  Â  extraInfo: {},

Â  };

}



```

Utils.test.ts

```ts
import { getStringInfo, toUpperCase } from "../app/Utils";

// `describe` groups multiple related tests into a single test suite

describe("Utils test suite", () => {

Â  // Test case for `toUpperCase` function

Â  it("should return uppercase of a valid string", () => {

Â  Â  //arrange:Define the function under test (SUT=>system under test)

Â  Â  const sut = toUpperCase;

Â  Â  const expected = "ABC";

Â  Â  //act

Â  Â  const actual = sut("abc");

Â  Â  //assert:

Â  Â  expect(actual).toBe("ABC");

Â  });

Â  //it.only ensures that Jest runs only this test case , ignoring others

Â  it.only("should return info for valid string", () => {

Â  Â  const actual = getStringInfo("My-String");

Â  Â  //for primitives use toBe(Assert:verify the lowercase version)

Â  Â  expect(actual.lowerCase).toBe("my-string");

Â  Â  //for objects use toEqual (Assert:Check that extraInfo is an empty object)

Â  Â  expect(actual.extraInfo).toEqual({});

Â  Â  //Assert : verify length using two methods

Â  Â  expect(actual.characters.length).toBe(9);

Â  Â  expect(actual.characters).toHaveLength(9);

Â  Â  //Assert:Verify the array of characters

Â  Â  expect(actual.characters).toEqual([

Â  Â  Â  "M",

Â  Â  Â  "y",

Â  Â  Â  "-",

Â  Â  Â  "S",

Â  Â  Â  "t",

Â  Â  Â  "r",

Â  Â  Â  "i",

Â  Â  Â  "n",

Â  Â  Â  "g",

Â  Â  ]);

Â  Â  // Assert : Chec if "M" is in the array

Â  Â  expect(actual.characters).toContain<string>("M");

Â  Â  //Assert: Ensure array contains all given elements(in any order)

Â  Â  expect(actual.characters).toEqual(

Â  Â  Â  expect.arrayContaining(["S", "t", "r", "i", "n", "g", "M", "y", "-"])

Â  Â  );

Â  Â  //Assert : Ensure extraInfo is not undefined

Â  Â  expect(actual.extraInfo).not.toBe(undefined);

Â  Â  expect(actual.extraInfo).not.toBeUndefined();

Â  Â  //Assert : Ensure extraInfo is defined

Â  Â  expect(actual.extraInfo).toBeDefined();

Â  Â  //Asssert :Ensure extraInfo is truthy

Â  Â  expect(actual.extraInfo).toBeTruthy();

Â  });

});

```

## Multiple tests structure

The way we are writing tests it would be difficult to find the right spot where the problem is .For this we should write more meaningful unit tests 



**Nested `describe()` for Better Organization**  
ðŸ”¹ Groups all `getStringInfo()` tests together for **better readability**.  
ðŸ”¹ Makes test output **easier to navigate**.  

Utils.test.ts

```ts
import { getStringInfo, toUpperCase } from "../app/Utils";

// `describe` groups multiple related tests into a single test suite

describe("Utils test suite", () => {

Â  // Test case for `toUpperCase` function

Â  it("should return uppercase of a valid string", () => {

Â  Â  //arrange:Define the function under test (SUT=>system under test)

Â  Â  const sut = toUpperCase;

Â  Â  const expected = "ABC";

Â  Â  //act

Â  Â  const actual = sut("abc");

Â  Â  //assert:

Â  Â  expect(actual).toBe("ABC");

Â  });

Â  describe("getStringInfo for arg My-string should", () => {

Â  Â  test("return right length Â ", () => {

Â  Â  Â  const actual = getStringInfo("My-String");

Â  Â  Â  expect(actual.characters).toHaveLength(9);

Â  Â  });

Â  Â  test("return right lower case", () => {

Â  Â  Â  const actual = getStringInfo("My-String");

Â  Â  Â  expect(actual.lowerCase).toBe("my-string");

Â  Â  });

Â  Â  test("return right upper case", () => {

Â  Â  Â  const actual = getStringInfo("My-String");

Â  Â  Â  expect(actual.upperCase).toBe("MY-STRING");

Â  Â  });

Â  Â  test("return right charcaters", () => {

Â  Â  Â  const actual = getStringInfo("My-String");

Â  Â  Â  //Assert:Verify the array of characters

Â  Â  Â  expect(actual.characters).toEqual([

Â  Â  Â  Â  "M",

Â  Â  Â  Â  "y",

Â  Â  Â  Â  "-",

Â  Â  Â  Â  "S",

Â  Â  Â  Â  "t",

Â  Â  Â  Â  "r",

Â  Â  Â  Â  "i",

Â  Â  Â  Â  "n",

Â  Â  Â  Â  "g",

Â  Â  Â  ]);

Â  Â  Â  // Assert : Chec if "M" is in the array

Â  Â  Â  expect(actual.characters).toContain<string>("M");

Â  Â  Â  //Assert: Ensure array contains all given elements(in any order)

Â  Â  Â  expect(actual.characters).toEqual(

Â  Â  Â  Â  expect.arrayContaining(["S", "t", "r", "i", "n", "g", "M", "y", "-"])

Â  Â  Â  );

Â  Â  });

Â  Â  test("return defined extra info", () => {

Â  Â  Â  const actual = getStringInfo("My-String");

Â  Â  Â  expect(actual.extraInfo).toBeDefined();

Â  Â  });

Â  Â  test("return right extra info", () => {

Â  Â  Â  const actual = getStringInfo("My-String");

Â  Â  Â  expect(actual.extraInfo).toEqual({});

Â  Â  });

Â  });

});



```

# Parametized test

```ts
// `describe.only()` ensures that only this test suite runs, ignoring others
describe.only("ToUpperCase examples", () => {  

    // `it.each()` allows running the same test multiple times with different inputs
    it.each([
      { input: "abc", expected: "ABC" },          // Test case 1: "abc" â†’ "ABC"
      { input: "My-String", expected: "MY-STRING" },  // Test case 2: "My-String" â†’ "MY-STRING"
      { input: "def", expected: "DEF" },          // Test case 3: "def" â†’ "DEF"
    ])(
      // `$input` and `$expected` are placeholders that dynamically insert values from the array
      "$input toUpperCase should be $expected",   
    
      // The test function receives `input` and `expected` values for each case
      ({ input, expected }) => {  
    
        // Act: Call the function being tested
        const actual = toUpperCase(input);
    
        // Assert: Verify that the output matches the expected value
        expect(actual).toBe(expected);
      }
    );

});

```


